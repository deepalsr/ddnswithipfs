<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>DDNS with IPFS Preview</title>

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" />
  <style>
    body {
      font-family: sans-serif;
      margin: 2rem;
    }
    input, button {
      padding: 0.5rem;
      margin: 0.5rem 0;
    }
    section {
      margin-bottom: 2rem;
    }
    #miniBrowser {
      border: 1px solid #ccc;
      height: 600px;
      overflow: hidden;
      background: white;
    }
  </style>
</head>
<body>
  <h1>Decentralized Domain Resolver (IPFS)</h1>

  <button id="connectWallet">Connect Wallet</button>
  <p id="walletAddress"></p>

  <!-- 📦 Register -->
  <section>
    <h2>Register Domain</h2>
    <input type="text" id="domainInput" placeholder="yourdomain.eth" />
    <input type="file" id="fileInput" />
    <button id="registerBtn">Upload & Register</button>
    <p id="registerStatus"></p>
  </section>

  <!-- 🌍 Resolve and Render -->
  <section>
    <h2>Resolve Domain</h2>
    <input type="text" id="resolveInput" placeholder="yourdomain.eth" />
    <button id="resolveBtn">Resolve</button>
    <p id="resolveStatus"></p>

    <div>
      <strong>Domain:</strong> <span id="resolvedDomain"></span> |
      <strong>CID:</strong> <span id="resolvedCid"></span>
    </div>

    <div id="miniBrowser" style="margin-top:1rem;"></div>
  </section>

  <!-- 👁 Ownership -->
  <section>
    <h2>Check Ownership</h2>
    <input type="text" id="ownershipInput" placeholder="yourdomain.eth" />
    <button id="checkOwnershipBtn">Check Ownership</button>
    <p id="ownershipStatus"></p>
  </section>

  <!-- 📋 Domain Table -->
  <section>
    <h2>All Registered Domains</h2>
    <table border="1" width="100%">
      <thead>
        <tr><th>Domain</th><th>CID</th></tr>
      </thead>
      <tbody id="domainsTable"></tbody>
    </table>
  </section>

  <!-- 🔁 CID Update -->
  <section>
    <h2>Update CID</h2>
    <input type="text" id="updateDomainInput" placeholder="yourdomain.eth" />
    <input type="text" id="newCidInput" placeholder="New CID" />
    <button id="updateCidBtn">Update CID</button>
    <p id="updateCidStatus"></p>
  </section>

  <!-- 🔄 Ownership Transfer -->
  <section>
    <h2>Transfer Domain Ownership</h2>
    <input type="text" id="transferDomainInput" placeholder="yourdomain.eth" />
    <input type="text" id="newOwnerInput" placeholder="New Owner Address" />
    <button id="transferDomainBtn">Transfer Ownership</button>
    <p id="transferDomainStatus"></p>
  </section>

  <!-- Libraries -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
  <script src="./libs/ethers.umd.min.js"></script>
  <script type="module" src="./main.js"></script>
</body>
</html>
